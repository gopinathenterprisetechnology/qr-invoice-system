<!DOCTYPE html>
<html>
<head>
<title>Invoice Verification</title>
<style>
body{
  font-family: Arial;
  background:#f5f5f5;
}
.bill{
  width:800px;
  margin:20px auto;
  background:white;
  padding:20px;
  border:2px solid black;
}
.header{
  text-align:center;
  font-weight:bold;
  font-size:18px;
}
.section{
  border:1px solid black;
  padding:5px;
  margin-top:5px;
}
table{
  width:100%;
  border-collapse:collapse;
}
table, th, td{
  border:1px solid black;
}
th,td{
  padding:5px;
  font-size:14px;
}
.right{
  text-align:right;
}
.bold{
  font-weight:bold;
}
</style>
</head>
<body>

<div id="invoiceData">Loading...</div>

<script>
const params = new URLSearchParams(window.location.search);
const inv = params.get("inv");

if(!inv){
 document.getElementById("invoiceData").innerHTML="Invalid QR ❌";
}else{

fetch("invoices/"+inv+".json")
.then(res=>{
 if(!res.ok) throw new Error();
 return res.json();
})
.then(data=>{

let itemsHTML="";
data.items.forEach((item,i)=>{
itemsHTML+=`
<tr>
<td>${i+1}</td>
<td>${item.name}<br>Colour: ${item.colour}</td>
<td>${item.qty}</td>
<td>${item.rate}</td>
<td>${item.amount}</td>
</tr>`;
});

document.getElementById("invoiceData").innerHTML=`

<div class="bill">

<div style="border-bottom:2px solid black; padding-bottom:10px; margin-bottom:15px;">

  <div style="text-align:center;">
    <h2 style="margin:0;">GOPINATH ENTERPRISE & TECHNOLOGY</h2>
    <p style="margin:2px 0; font-weight:bold;">CYBER CAFE & MOBILE SHOP</p>
    <p style="margin:2px 0;">
      All Type of Mobile, Acceseries, Headphone, Earbuds, Neckband Sales & Services
    </p>
    <p style="margin:2px 0;">
      Dakshin Rasulpur, Arambagh, Hooghly, West Bengal - 712413
    </p>
    <p style="margin:2px 0;">
      Mobile: 9339225562 / 8001901640
    </p>
  </div>

  <!-- Bottom Line: Email Left | Place of Supply Right -->
  <div style="display:flex; justify-content:space-between; margin-top:8px; font-size:14px;">
    <div>
      Email: gopinathenterprisetechnology@gmail.com
    </div>
    <div>
      Place of Supply: ____________________
    </div>
  </div>

</div>



<div class="section">
<b>Invoice No:</b> ${data.invoice.number}
<span style="float:right;"><b>Date:</b> ${data.invoice.date}</span>
</div>

<div class="section">
<b>Customer:</b> ${data.customer.name}<br>
<b>Address:</b> ${data.customer.address}<br>
<b>Mobile:</b> ${data.customer.mobile}
</div>

<table>
<tr>
<th>Sl No</th>
<th>Description</th>
<th>Qty</th>
<th>Rate</th>
<th>Amount</th>
</tr>
${itemsHTML}
</table>

<br>

<table>
<tr>
<td class="right bold">Total Amount :</td>
<td class="right">${data.total.total_amount}</td>
</tr>
<tr>
<td class="right bold">Paid Amount :</td>
<td class="right">${data.total.paid}</td>
</tr>
<tr>
<td class="right bold">Due Amount :</td>
<td class="right">${data.total.due}</td>
</tr>
</table>

<br>

<div class="section">
<b>Rupees In Words:</b> ${data.total.words}
</div>

<div class="section">
<b>Description:</b> ${data.description}
</div>

<br><br>

<div style="display:flex; justify-content:space-between;">
<div>
<b>Terms & Conditions:</b><br>
1. Goods once sold not taken back.<br>
2. Warranty as per company policy.
</div>

<div style="text-align:right;">
For ${data.shop.name}<br><br>
Authorised Signature
</div>
</div>

</div>
`;

})
.catch(()=>{
document.getElementById("invoiceData").innerHTML="Invoice Not Found ❌";
});
}
</script>

</body>
</html>
